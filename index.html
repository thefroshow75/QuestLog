<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <title>QuestLog</title>
      <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- navbar.html -->

<nav class="navbar">
  <div class="navbar-left">
    <h1 class="logo">QuestLog</h1>
    <span id="username">JUSTICE</span>
  </div>
  <div class="navbar-center" id="xpSection">
    <div id="exp-bar">
      <div id="exp-progress" style="width: 0%;">0%</div>
      <span id="level">LVL 0</span>
    </div>
  </div>
  <div class="navbar-right">
    <ul class="nav-links">
      <li data-view="quests">ğŸ—ºï¸ Quests</li>
      <li data-view="chat">ğŸ¤– Chat</li>
      <li data-view="projects">ğŸ“ Projects</li>
      <li data-view="start" class="settings-nav">â˜°</li>
    </ul>
    <button class="mobile-menu-btn" id="mobileMenuBtn">â˜°</button>
  </div>
</nav>

<!-- Mobile Navigation Overlay -->
<div id="mobileNavOverlay" class="mobile-nav-overlay">
  <div class="mobile-nav-content">
    <div class="mobile-nav-header">
      <h3>QuestLog</h3>
      <button class="mobile-nav-close" id="mobileNavClose">âœ•</button>
    </div>

    <!-- XP Info in Mobile Menu -->
    <div class="mobile-xp-section">
      <div class="mobile-user-info">
        <span id="mobileUsername">JUSTICE</span>
        <span id="mobileLevel">LVL 0</span>
      </div>
      <div class="mobile-xp-bar">
        <div id="mobileExpProgress" style="width: 0%;">0%</div>
      </div>
    </div>

    <div class="mobile-nav-links">
      <div class="mobile-nav-link" data-view="quests">ğŸ—ºï¸ Quests</div>
      <div class="mobile-nav-link" data-view="chat">ğŸ¤– Chat</div>
      <div class="mobile-nav-link" data-view="projects">ğŸ“ Projects</div>
      <div class="mobile-nav-link" data-view="start">âš™ï¸ Settings</div>
    </div>
  </div>
</div>

<!-- startScreen.html -->
<section id="startScreen">
      <div class="overlay"></div>

      <div class="start-content">
            <h1>Justice's Quest Log</h1>

            <div class="data-summary" id="dataSummary">
                  <h3>ğŸ“Š Current Progress</h3>
                  <div class="summary-stats">
                        <div class="stat-item">
                              <span class="stat-number" id="statProjects">0</span>
                              <span class="stat-label">Projects</span>
                        </div>
                        <div class="stat-item">
                              <span class="stat-number" id="statQuests">0</span>
                              <span class="stat-label">Quests</span>
                        </div>
                        <div class="stat-item">
                              <span class="stat-number" id="statTasks">0</span>
                              <span class="stat-label">Tasks</span>
                        </div>
                        <div class="stat-item">
                              <span class="stat-number" id="statLevel">0</span>
                              <span class="stat-label">Level</span>
                        </div>
                  </div>
            </div>

            <div class="start-buttons">
                  <button id="startBtn"><p>Start Game</p></button>
                  <button id="loadBtn">Load Game</button>
                  <button id="saveBtn">Save Game</button>
            </div>
      </div>
</section>

<!-- questsScreen.html -->
<section id="questsScreen">
  <h2 class="section-title">Quests</h2>
  <div class="quests-layout">
    <!-- Projects Sidebar -->
    <aside class="sidebar" id="projectList">
      <!-- Project tabs injected here -->
    </aside>
    <!-- Quest List Center -->
    <main class="quest-list" id="questList">
      <h3>Select a project to view its quests</h3>
      <!-- Quests injected here -->
    </main>
  </div>
</section>

<section id="chatScreen">
  <h2 class="section-title">Chat</h2>
  <div class="chat-container">
        <h1>QuestBot Chat</h1>
    <div id="chatMessages"></div>

        <div class="chat-input-area">
              <textarea id="chatInput" placeholder="Type your message..."></textarea>
              <button id="chatSendBtn">Send</button>
        </div>
  </div>
</section>

<!-- projectsScreen.html -->
<section id="projectsScreen">
  <h2 class="section-title">Projects</h2>
      <div class="projects-toolbar">
            <h2 class="gallery-title">Project Gallery</h2>
            <div class="sort-controls">
                  <label for="sortBy">Sort by:</label>
                  <select id="sortBy" onchange="sortProjects()">
                        <option value="name">ğŸ“ Name</option>
                        <option value="completed" selected>âœ… Progress</option>
                        <option value="skill">ğŸ¯ Skills</option>
                        <option value="date">ğŸ“… Date</option>
                        <option value="difficulty">âš¡ Difficulty</option>
                  </select>
                  <button id="sortOrder" onclick="toggleSortOrder()" title="Toggle sort order">â†‘</button>
            </div>
      </div>
      <div class="skill-filter-bar" id="skillFilterBar">
            <div class="skill-filter-title">Filter by Skills:</div>
            <div class="skill-filter-tags" id="skillFilterTags">
                  <!-- Skill filter tags will be dynamically generated -->
            </div>
            <button class="clear-filters-btn" id="clearFiltersBtn" onclick="clearSkillFilters()">Clear All</button>
      </div>
      <div class="project-gallery" id="projectGallery">
      <!-- Cards injected via JS -->
      </div>
</section>

<!-- Form Overlays -->
<div id="formOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
  <div style="background: var(--color-bg-light); padding: 2rem; border-radius: 12px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
    <h3 style="color: var(--color-primary); margin-bottom: 1.5rem;">Add New Project</h3>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Project Title:</label>
      <input type="text" id="newProjectTitle" style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Category:</label>
      <select id="newProjectCategory" style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
        <option value="3D Printing">ğŸ–¨ï¸ 3D Printing</option>
        <option value="Python">ğŸ Python</option>
        <option value="Web Development">ğŸŒ Web Development</option>
        <option value="Mechanics/Electrical">âš™ï¸ Mechanics/Electrical</option>
        <option value="Robotics/IoT">ğŸ”‹ Robotics/IoT</option>
        <option value="Other">ğŸ“ Other</option>
      </select>
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Project Type:</label>
      <select id="newProjectType" style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
        <option value="project">ğŸ’¼ Project</option>
        <option value="media">ğŸ“¸ Media/Gallery</option>
        <option value="blog">ğŸ“ Blog Post</option>
        <option value="experiment">ğŸ§ª Experimental Data</option>
        <option value="documentation">ğŸ“š Documentation</option>
      </select>
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Description:</label>
      <textarea id="newProjectDesc" style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text); min-height: 100px; resize: vertical;"></textarea>
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Skills/Technologies (comma-separated):</label>
      <input type="text" id="newProjectSkills" placeholder="Python, JavaScript, 3D Printing, Electronics..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Image URL:</label>
      <input type="url" id="newProjectImage" style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">External Links (optional):</label>
      <input type="url" id="newProjectLinks" placeholder="GitHub, Demo, Documentation..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
    </div>

    <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
      <button onclick="closeForm()" style="padding: 0.75rem 1.5rem; background: var(--color-accent); border: none; border-radius: 6px; color: var(--color-text); cursor: pointer;">Cancel</button>
      <button onclick="saveNewProject()" style="padding: 0.75rem 1.5rem; background: var(--color-primary); border: none; border-radius: 6px; color: white; cursor: pointer;">Save Project</button>
    </div>
  </div>
</div>

<div id="questFormOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
  <div style="background: var(--color-bg-light); padding: 2rem; border-radius: 12px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
    <h3 style="color: var(--color-primary); margin-bottom: 1.5rem;">Add New Quest</h3>
    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Quest Title:</label>
      <input type="text" id="newQuestTitle" style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
    </div>
    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Description:</label>
      <textarea id="newQuestDescription" style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text); min-height: 80px; resize: vertical;"></textarea>
    </div>
    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Tasks (comma-separated):</label>
      <textarea id="newQuestTask" placeholder="Task 1, Task 2, Task 3..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text); min-height: 100px; resize: vertical;"></textarea>
    </div>
    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Skills (comma-separated, optional):</label>
      <input type="text" id="newQuestSkills" placeholder="Python, JavaScript, Design..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
    </div>
    <div style="margin-bottom: 1.5rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Rewards (comma-separated, optional):</label>
      <input type="text" id="newQuestRewards" placeholder="XP, Achievement, Badge..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text);">
    </div>
    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
      <button onclick="closeQuestForm()" style="padding: 0.75rem 1.5rem; background: var(--color-accent); border: none; border-radius: 6px; color: var(--color-text); cursor: pointer;">Cancel</button>
      <button onclick="saveNewQuest()" style="padding: 0.75rem 1.5rem; background: var(--color-primary); border: none; border-radius: 6px; color: white; cursor: pointer;">Save Quest</button>
    </div>
  </div>
</div>

<!-- Save Game Modal -->
<div id="saveModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
  <div style="background: var(--color-bg-light); padding: 2rem; border-radius: 12px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
    <h3 style="color: var(--color-primary); margin-bottom: 1.5rem;">ğŸ’¾ Save Game Data</h3>

    <div style="margin-bottom: 1rem;">
      <button id="copyToClipboardBtn" style="width: 100%; padding: 1rem; background: var(--color-primary); border: none; border-radius: 6px; color: white; cursor: pointer; margin-bottom: 1rem;">
        ğŸ“‹ Copy to Clipboard
      </button>
      <button id="downloadBackupBtnModal" style="width: 100%; padding: 1rem; background: var(--color-accent); border: none; border-radius: 6px; color: white; cursor: pointer; margin-bottom: 1rem;">
        ğŸ“ Download Backup File
      </button>
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Backup Data (JSON):</label>
      <textarea id="saveDataTextarea" readonly style="width: 100%; height: 200px; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text); font-family: monospace; font-size: 0.8rem; resize: vertical;"></textarea>
    </div>

    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
      <button onclick="closeSaveModal()" style="padding: 0.75rem 1.5rem; background: var(--color-accent); border: none; border-radius: 6px; color: var(--color-text); cursor: pointer;">Close</button>
    </div>
  </div>
</div>

<!-- Load Game Modal -->
<div id="loadModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
  <div style="background: var(--color-bg-light); padding: 2rem; border-radius: 12px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
    <h3 style="color: var(--color-primary); margin-bottom: 1.5rem;">ğŸ“¤ Load Game Data</h3>

    <div style="margin-bottom: 1rem;">
      <button id="loadFromFileBtn" style="width: 100%; padding: 1rem; background: var(--color-primary); border: none; border-radius: 6px; color: white; cursor: pointer; margin-bottom: 1rem;">
        ğŸ“ Load from File
      </button>
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; color: var(--color-text);">Paste JSON Data:</label>
      <textarea id="loadDataTextarea" placeholder="Paste your backup JSON data here..." style="width: 100%; height: 200px; padding: 0.75rem; border: 1px solid var(--color-accent); border-radius: 6px; background: var(--color-bg); color: var(--color-text); font-family: monospace; font-size: 0.8rem; resize: vertical;"></textarea>
    </div>

    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
      <button onclick="closeLoadModal()" style="padding: 0.75rem 1.5rem; background: var(--color-accent); border: none; border-radius: 6px; color: var(--color-text); cursor: pointer;">Cancel</button>
      <button onclick="loadFromTextarea()" style="padding: 0.75rem 1.5rem; background: var(--color-primary); border: none; border-radius: 6px; color: white; cursor: pointer;">Load Data</button>
    </div>
  </div>
</div>

<input type="file" id="hiddenFileInput" accept=".json" style="display: none;">

<script src="export-functions.js"></script>
<script src="script.js"></script>
</body>
</html>
